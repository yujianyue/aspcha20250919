# PHP+MySQL多租户多查询规则合一通用查询系统

## 项目概述

这是一个完整的PHP+MySQL多租户多查询规则合一通用查询系统，支持多种查询规则和匹配模式，适用于各种数据查询场景。

## 核心功能

### 1. 多租户架构
- 支持多域名独立管理
- 每个域名拥有独立的数据表和配置
- 自动根据域名创建表前缀

### 2. 多种查询规则
- **T1**: 多输入框都对应输对
- **T2**: 单输入框输入后查询设定条件对应的多列
- **T3**: 下拉选设定的条件选那个查询哪列

### 3. 多种匹配规则
- **d**: 等于 - 完全匹配
- **b**: 包含 - 包含关键词
- **s**: 关键词开头 - 以关键词开始
- **e**: 关键词结尾 - 以关键词结束
- **k**: 多关键词 - 空格分隔的多个关键词

### 4. 权限管理
- VIP0-VIP9分级权限系统
- 不同等级有不同的记录限制、上传限制和文件大小限制
- 管理员可以调整用户权限等级

### 5. 数据管理
- 支持文件上传导入（.txt/.csv）
- 支持复制粘贴导入
- 批量数据操作
- 数据备份和恢复

### 6. 系统管理
- 完整的用户管理功能
- 系统配置管理
- 操作日志记录
- 统计信息查看

## 技术架构

### 后端技术
- **PHP 7.0+**: 服务器端编程语言
- **MySQL 5.6+**: 数据库管理系统
- **mysqli**: 数据库连接扩展
- **原生PHP**: 不使用外部框架，提高性能

### 前端技术
- **HTML5**: 页面结构
- **CSS3**: 样式设计
- **JavaScript**: 交互功能
- **AJAX**: 异步数据交互
- **响应式设计**: 支持移动端访问

### 数据库设计
- **user表**: 用户信息管理
- **site表**: 系统配置管理
- **data表**: 查询数据存储
- **logs表**: 操作日志记录

## 文件结构

```
/
├── index.php          # 前端查询入口
├── user.php           # 用户管理入口
├── admin.php          # 管理员入口
├── install.php        # 系统安装
├── readme.txt         # 使用说明
├── vips.txt          # VIP权限配置
├── rule.txt          # 查询规则配置
├── demo_data.csv     # 演示数据
├── inc/              # 公共文件目录
│   ├── conn.php      # 数据库连接配置
│   ├── sqls.php      # 数据库操作类
│   ├── pubs.php      # 公共函数库
│   ├── js.js         # 公共JavaScript
│   └── style.css     # 公共样式
├── lib/              # 用户功能模块
│   ├── list.php      # 数据列表管理
│   ├── liin.php      # 数据导入
│   ├── tong.php      # 统计管理
│   ├── site.php      # 系统设置
│   ├── baks.php      # 数据备份
│   ├── pass.php      # 修改密码
│   └── help.php      # 使用帮助
├── lia/              # 管理员功能模块
│   ├── user.php      # 用户管理
│   ├── list.php      # 查询系统管理
│   ├── logs.php      # 操作日志
│   ├── pass.php      # 修改密码
│   └── help.php      # 使用帮助
└── backups/          # 备份文件目录
```

## 主要特性

### 1. 安全性
- 所有输入都经过安全过滤
- SQL注入防护
- XSS攻击防护
- 密码加密存储
- 操作日志记录

### 2. 性能优化
- 数据库索引优化
- 分页查询
- 批量数据操作
- 缓存机制
- 响应式设计

### 3. 用户体验
- 直观的用户界面
- 实时反馈
- 错误提示
- 操作确认
- 帮助文档

### 4. 管理功能
- 完整的后台管理
- 用户权限控制
- 系统配置管理
- 操作日志监控
- 数据备份恢复

## 安装部署

### 环境要求
- PHP 7.0 或更高版本
- MySQL 5.6 或更高版本
- Web服务器 (Apache/Nginx)
- 支持mysqli扩展
- 文件写入权限

### 安装步骤
1. 上传文件到Web服务器
2. 设置目录权限
3. 访问install.php
4. 按照向导完成安装
5. 删除install.php文件

### 默认账户
- 管理员: admin / admin123
- 请及时修改默认密码

## 使用说明

### 前端查询
1. 访问index.php
2. 根据系统配置填写查询条件
3. 查看查询结果
4. 点击详情查看完整信息

### 用户管理
1. 访问user.php
2. 使用手机号登录
3. 管理数据、导入数据、查看统计
4. 配置系统设置

### 管理员后台
1. 访问admin.php
2. 使用管理员账户登录
3. 管理用户和系统
4. 查看操作日志

## 配置说明

### VIP权限配置
在vips.txt中配置不同VIP等级的限制：
- 总记录限制
- 单次上传条数限制
- 单次上传文件大小限制

### 查询规则配置
在rule.txt中配置查询规则和匹配规则：
- 查询规则：T1/T2/T3
- 匹配规则：d/b/s/e/k

## 注意事项

1. **安全**: 安装完成后立即删除install.php
2. **备份**: 定期备份数据库和文件
3. **权限**: 合理设置文件目录权限
4. **监控**: 定期查看操作日志
5. **更新**: 及时更新系统版本

## 技术支持

如有问题请参考readme.txt文件或联系开发团队。

## 版本信息

- 系统版本: v1.0.0
- 开发语言: PHP + MySQL
- 前端技术: HTML5 + CSS3 + JavaScript
- 更新日期: 2024-01-01

---

**注意**: 这是一个完整的生产级系统，包含了所有必要的功能和安全措施。请根据实际需求进行配置和部署。