查询系统使用说明
==================

系统简介
--------
本系统是一个基于PHP+MySQL的多租户多查询规则合一通用查询系统。
支持多种查询规则和匹配模式，适用于各种数据查询场景。

主要特性
--------
- 多租户架构，支持多域名独立管理
- 多种查询规则：T1(多输入框)、T2(单输入框多列)、T3(下拉选择)
- 多种匹配规则：等于、包含、开头、结尾、多关键词
- 灵活的数据导入：支持文件上传和复制粘贴
- 完善的权限管理：VIP0-VIP9分级权限
- 详细的操作日志：记录所有用户操作
- 响应式设计：支持手机和电脑访问
- 数据备份功能：支持完整备份和数据备份

环境要求
--------
- PHP 7.0 或更高版本
- MySQL 5.6 或更高版本
- Web服务器 (Apache/Nginx)
- 支持mysqli扩展
- 支持JSON扩展
- 支持Session扩展
- 文件写入权限

安装步骤
--------
1. 将系统文件上传到Web服务器目录
2. 确保inc目录有写入权限
3. 访问 install.php 进行安装
4. 按照安装向导完成配置：
   - 环境检查
   - 数据库配置
   - 创建管理员账户
   - 完成安装
5. 删除install.php文件确保安全

默认账户
--------
管理员账户: admin
默认密码: admin123
(首次登录后请立即修改密码)

文件结构
--------
/
├── index.php          # 前端查询入口
├── user.php           # 用户管理入口
├── admin.php          # 管理员入口
├── install.php        # 系统安装
├── readme.txt         # 使用说明
├── vips.txt          # VIP权限配置
├── rule.txt          # 查询规则配置
├── inc/              # 公共文件目录
│   ├── conn.php      # 数据库连接配置
│   ├── sqls.php      # 数据库操作类
│   ├── pubs.php      # 公共函数库
│   ├── js.js         # 公共JavaScript
│   └── style.css     # 公共样式
├── lib/              # 用户功能模块
│   ├── list.php      # 数据列表管理
│   ├── liin.php      # 数据导入
│   ├── tong.php      # 统计管理
│   ├── site.php      # 系统设置
│   ├── baks.php      # 数据备份
│   ├── pass.php      # 修改密码
│   └── help.php      # 使用帮助
├── lia/              # 管理员功能模块
│   ├── user.php      # 用户管理
│   ├── list.php      # 查询系统管理
│   ├── logs.php      # 操作日志
│   ├── pass.php      # 修改密码
│   └── help.php      # 使用帮助
└── backups/          # 备份文件目录

数据库结构
----------
1. user表 - 用户表
   - id: 主键，自增
   - phone: 手机号，唯一，必填
   - password: 密码，必填
   - wechat_id: 微信ID，可选
   - create_time: 创建时间，自动
   - status: 状态(normal/disabled)，默认normal

2. site表 - 系统设置表
   - id: 主键，自增
   - domain: 域名，唯一，不可修改
   - admin: 管理员，必填
   - user_type: 用户类型(VIP0-VIP9)，默认VIP0
   - admin_access: 管理员访问开关，默认1
   - title: 系统标题，可选
   - condition1: 查询条件一，必填
   - condition2: 查询条件二，可选
   - condition3: 查询条件三，可选
   - query_rule: 查询规则(T1/T2/T3)，默认T1
   - match_rule: 匹配规则(d/b/s/e/k)，默认d
   - footer_text: 底部文字，可选
   - footer_link: 底部链接，可选
   - has_result_text: 有结果提示文字，可选
   - no_result_text: 无结果提示文字，可选
   - input_hint_text: 输入页面提示文字，可选
   - captcha_enabled: 验证码开关，默认0
   - user_access: 用户访问开关，默认1
   - page_size: 每页显示数量，默认20

3. data表 - 数据表
   - id: 主键，自增
   - condition1: 条件一，必填，索引
   - condition2: 条件二，可选
   - condition3: 条件三，可选
   - detail_data: 详细数据(JSON格式)，可选
   - batch: 批次，可选
   - query_status: 查询状态(1可查/0不可查)，默认1
   - add_time: 添加时间，自动
   - query_count: 查询次数，默认0
   - query_remark: 查询备注，可选

4. logs表 - 日志表
   - id: 主键，自增
   - log_time: 记录时间，自动
   - user: 用户，必填
   - domain: 域名，必填
   - ip: IP地址，必填
   - act: 操作类型，必填
   - remark: 操作备注，可选

查询规则说明
------------
T1: 多输入框都对应输对
    - 需要填写所有查询条件
    - 所有条件都必须匹配

T2: 单输入框输入后查询设定条件对应的多列
    - 只需填写一个查询条件
    - 系统会在多个字段中搜索

T3: 下拉选设定的条件选那个查询哪列
    - 通过下拉选择查询条件
    - 根据选择查询对应字段

匹配规则说明
------------
d: 等于 - 完全匹配
b: 包含 - 包含关键词
s: 关键词开头 - 以关键词开始
e: 关键词结尾 - 以关键词结束
k: 多关键词 - 空格分隔的多个关键词

VIP权限说明
-----------
VIP0: 1,000条记录，100条上传，1MB文件
VIP1: 5,000条记录，500条上传，2MB文件
VIP2: 10,000条记录，1,000条上传，4MB文件
VIP3: 20,000条记录，2,000条上传，8MB文件
VIP4: 50,000条记录，5,000条上传，16MB文件
VIP5: 100,000条记录，10,000条上传，32MB文件
VIP6: 200,000条记录，20,000条上传，64MB文件
VIP7: 500,000条记录，50,000条上传，128MB文件
VIP8: 1,000,000条记录，100,000条上传，256MB文件
VIP9: 2,000,000条记录，200,000条上传，512MB文件

数据导入格式
------------
支持 .txt 和 .csv 文件格式：
- 第一行为字段名
- 数据行用逗号或制表符分隔
- 文件大小限制 4MB
- 支持批量导入
- 支持复制粘贴导入

安全说明
--------
- 所有输入都经过安全过滤
- 支持验证码防护
- 操作日志记录
- 权限分级管理
- 密码加密存储
- SQL注入防护

使用注意事项
------------
1. 定期备份数据
2. 及时更新系统
3. 设置强密码
4. 监控系统日志
5. 合理设置权限
6. 定期清理日志
7. 注意文件权限
8. 监控磁盘空间

常见问题
--------
Q: 如何修改系统标题？
A: 登录用户管理后台，进入系统设置，修改标题字段。

Q: 如何添加新的查询条件？
A: 在系统设置中修改查询条件字段，然后重新初始化系统。

Q: 如何备份数据？
A: 在用户管理后台的数据备份功能中，选择备份类型进行备份。

Q: 如何查看操作日志？
A: 管理员可以在操作日志页面查看所有用户的操作记录。

Q: 如何修改用户权限？
A: 管理员可以在查询系统管理页面修改用户的VIP等级。

技术支持
--------
如有问题请联系系统管理员或开发团队。

版本信息
--------
系统版本: v1.0.0
更新日期: 2024-01-01
开发语言: PHP + MySQL
前端技术: HTML5 + CSS3 + JavaScript